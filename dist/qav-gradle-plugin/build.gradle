
plugins {
    id 'java-gradle-plugin'
}

apply plugin: 'groovy'


dependencies {
    compile gradleApi()
    compile(project(":qav-runner")) {
        exclude group: "ch.qos.logback" // Gradle has its own logging, based on SLF4J.
        exclude group: "commons-logging" // Gradle has its own logging, based on SLF4J.
    }
    compile(project(":dist:qav-app")) {
        exclude group: "ch.qos.logback" // Gradle has its own logging, based on SLF4J.
        exclude group: "commons-logging" // Gradle has its own logging, based on SLF4J.
    }
}

task sourcesJar(type: Jar, dependsOn: classes) {
    archiveClassifier = 'sources'
    from sourceSets.main.allSource
}

task groovydocJar(type: Jar, dependsOn: groovydoc) {
    archiveClassifier = 'javadoc'
    from groovydoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives groovydocJar
}

gradlePlugin {
    plugins {
        qavalidator {
            id = "de.qaware.qav.gradle.qavalidator"
            implementationClass = "de.qaware.qav.gradle.QAvalidatorGradlePlugin"
        }
    }
}